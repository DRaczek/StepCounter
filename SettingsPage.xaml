<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:StepCounter.ViewModels"
             xmlns:buttons="clr-namespace:Syncfusion.Maui.Buttons;assembly=Syncfusion.Maui.Buttons"
             xmlns:syncfusion="clr-namespace:Syncfusion.Maui.Popup;assembly=Syncfusion.Maui.Popup"
             xmlns:editors="clr-namespace:Syncfusion.Maui.Inputs;assembly=Syncfusion.Maui.Inputs"
             x:Class="StepCounter.SettingsPage"
             Title="Settings">

    <VerticalStackLayout Spacing="20">
        <Grid ColumnDefinitions="50,Auto,*" Padding="20,5">
            <Grid.GestureRecognizers>
                <TapGestureRecognizer Tapped="TapGestureRecognizer_Tapped"/>
            </Grid.GestureRecognizers>
            <Image
                Source="steps.png"
                WidthRequest="50"
                HeightRequest="50"
                Grid.Column="0"/>
            <StackLayout
                Margin="20,0,0,0"
                Grid.Column="1">
                <Label
                    Text="Daily goal"
                    FontSize="Medium"/>
                <Label
                    Text="{Binding DailyStepGoal, StringFormat='Current goal: {0}'}"
                    FontSize="Small"
                    TextColor="DarkGray"
                    />
            </StackLayout>
            <Label
                Text="&gt;"
                HorizontalOptions="End"
                Grid.Column="2"
                FontSize="Large"/>
        </Grid>
        <BoxView HeightRequest="1" Color="DarkSlateGrey"/>
        <syncfusion:SfPopup 
            x:Name="stepGoalPopup"
            Closed="stepGoalPopup_Closed"
            HeaderTitle="New step goal"
            OverlayMode="Blur">
            <syncfusion:SfPopup.PopupStyle>
                <syncfusion:PopupStyle
                    HeaderTextAlignment="Center"
                    HeaderTextColor="White"
                    PopupBackground="#404040"/>
            </syncfusion:SfPopup.PopupStyle>
            <syncfusion:SfPopup.ContentTemplate>
                <DataTemplate>
                    <VerticalStackLayout>
                        <Entry Text="{Binding DailyStepGoal, Mode=TwoWay}" 
                               Keyboard="Numeric"
                               FontSize="24" 
                               HorizontalOptions="Center"
                               HorizontalTextAlignment="Center"
                               WidthRequest="150"/>
                    </VerticalStackLayout>
                </DataTemplate>
            </syncfusion:SfPopup.ContentTemplate>
        </syncfusion:SfPopup>
    </VerticalStackLayout>
</ContentPage>
